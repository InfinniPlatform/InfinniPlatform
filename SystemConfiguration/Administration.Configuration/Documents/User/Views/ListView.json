{
  "Id": "2915630f-9121-428b-b794-89875a363ba5",
  "LayoutPanel": {
    "StackPanel": {
      "Items": [
        {
          "SearchPanel": {
            "DataSource": "MainDataSource"
          }
        },
        {
          "DataGrid": {
            "Columns": [
              {
                "Text": "Логин пользователя",
                "DisplayProperty": "UserName"
              }
            ],
            "Items": {
              "PropertyBinding": {
                "DataSource": "MainDataSource"
              }
            },
            "ToolBar": {
              "Items": [
                {
                  "ToolBarButton": {
                    "Text": "Добавить",
                    "Action": {
                      "AddAction": {
                        "View": {
                          "AutoView": {
                            "ConfigId": "Administration",
                            "DocumentId": "User",
                            "MetadataName": "EditView",
                            "OpenMode": "Page"
                          }
                        },
                        "DataSource": "MainDataSource"
                      }
                    }
                  }
                },
                {
                  "ToolBarButton": {
                    "Text": "Редактировать",
                    "Action": {
                      "EditAction": {
                        "View": {
                          "AutoView": {
                            "ConfigId": "Administration",
                            "DocumentId": "User",
                            "MetadataName": "EditView",
                            "OpenMode": "Page"
                          }
                        },
                        "DataSource": "MainDataSource"
                      }
                    }
                  }
                },
                {
                  "ToolBarButton": {
                    "Text": "Сменить пароль",
                    "Action": {
                      "EditAction": {
                        "View": {
                          "AutoView": {
                            "ConfigId": "Administration",
                            "DocumentId": "User",
                            "MetadataName": "EditPasswordView",
                            "OpenMode": "Page"
                          }
                        },
                        "DataSource": "MainDataSource"
                      }
                    }
                  }
                },
                {
                  "ToolBarButton": {
                    "Text": "Удалить",
                    "OnClick": {
                      "Name": "DeleteUser"
                    }
                  }
                }
              ]
            }
          }
        },
        {
          "ToolBar": {
            "Items": [
              {
                "ToolBarButton": {
                  "Text": "Добавить",
                  "Action": {
                    "AddAction": {
                      "View": {
                        "AutoView": {
                          "ConfigId": "Administration",
                          "DocumentId": "User",
                          "MetadataName": "EditView",
                          "OpenMode": "Page"
                        }
                      },
                      "DataSource": "MainDataSource"
                    }
                  }
                }
              },
              {
                "ToolBarButton": {
                  "Text": "Редактировать",
                  "Action": {
                    "EditAction": {
                      "View": {
                        "AutoView": {
                          "ConfigId": "Administration",
                          "DocumentId": "User",
                          "MetadataName": "EditView",
                          "OpenMode": "Page"
                        }
                      },
                      "DataSource": "MainDataSource"
                    }
                  }
                }
              },
              {
                "ToolBarButton": {
                  "Text": "Сменить пароль",
                  "Action": {
                    "EditAction": {
                      "View": {
                        "AutoView": {
                          "ConfigId": "Administration",
                          "DocumentId": "User",
                          "MetadataName": "EditPasswordView",
                          "OpenMode": "Page"
                        }
                      },
                      "DataSource": "MainDataSource"
                    }
                  }
                }
              },
              {
                "ToolBarButton": {
                  "Text": "Удалить",
                  "OnClick": {
                    "Name": "DeleteUser"
                  }
                }
              }
            ]
          }
        }
      ]
    }
  },
  "DataSources": [
    {
      "DocumentDataSource": {
        "Name": "MainDataSource",
        "ConfigId": "Administration",
        "DocumentId": "User",
        "OnSelectedItemChanged": {
          "Name": "ChangeSelectedItem"
        },
        "UpdateAction": "DeleteUser"
      }
    },
    {
      "DocumentDataSource": {
        "Name": "SelectedUser",
        "ConfigId": "Administration",
        "DocumentId": "User"
      }
    }
  ],
  "Text": "Журнал 'Пользователь системы'",
  "MetadataType": "ListView",
  "Description": "",
  "Caption": "Журнал пользователей системы",
  "Name": "ListView",
  "ParentId": "30700424-13b6-450b-8b91-53821c143cdc",
  "Version": "version_systemconfig",
  "__ConfigId": "systemconfig",
  "__DocumentId": "viewmetadata",
  "Scripts": [
    {
      "Name": "ChangeSelectedItem",
      "Body": "context.DataSources['SelectedUser'].setSelectedItem(context.DataSources['MainDataSource'].getSelectedItem());"
    },
    {
      "Name": "DeleteUser",
      "Body": " context.Global.executeAction({\r\n    SaveAction : {\r\n       DataSource : 'MainDataSource',\r\n       CanClose : false\r\n    }\r\n }, function(data) {\r\n    context.DataSources['MainDataSource'].resumeUpdate();    \r\n });                  "
    }
  ]
}

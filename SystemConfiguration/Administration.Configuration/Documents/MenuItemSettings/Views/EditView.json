{
  "Id": "57101aa6-aac1-4fe2-ab36-570e5f500b76",
  "Scripts": [
    {
      "Name": "ViewLoaded",
      "Body": "debugger;\r\ncontext.Global.executeAction({\r\n   SaveAction : {\r\n      DataSource : \"MenuDataSource\",\r\n      CanClose : false\r\n   }\r\n   \r\n}, \r\nfunction(data) {\r\n   context.DataSources['MenuDataSource'].setDataItems(data);\r\n   \r\n});"
    },
    {
      "Name": "CreateItem",
      "Body": "var selectedItem = context.DataSources['MainDataSource'].getSelectedItem();\r\nselectedItem.FirstLevelMenu = selectedItem.FirstLevelMenu.DisplayName;\r\nselectedItem.SecondLevelMenu = selectedItem.SecondLevelMenu.DisplayName;\r\nselectedItem.ThirdLevelMenu = selectedItem.ThirdLevelMenu.DisplayName;\r\ncontext.DataSources['MainDataSource'].setSelectedItem(selectedItem);"
    }
  ],
  "LayoutPanel": {
    "StackPanel": {
      "Items": [
        {
          "ScrollPanel": {
            "LayoutPanel": {
              "GridPanel": {
                "Rows": [
                  {
                    "Cells": [
                      {
                        "ColumnSpan": 3,
                        "Items": [
                          {
                            "Label": {
                              "Text": "Элемент меню первого уровня"
                            }
                          }
                        ]
                      },
                      {
                        "ColumnSpan": 3,
                        "Items": [
                          {
                            "ComboBox": {
                              "ValueProperty": "Id",
                              "DisplayProperty": "Name",
                              "Value": {
                                "PropertyBinding": {
                                  "DataSource": "MainDataSource",
                                  "Property": "FirstLevelMenu"
                                }
                              },
                              "Items": {
                                "PropertyBinding": {
                                  "DataSource": "MenuDataSource.FirstLevelItems"
                                }
                              }
                            }
                          }
                        ]
                      },
                      {
                        "ColumnSpan": 3,
                        "Items": [
                          {
                            "Label": {
                              "Text": "Элемент меню второго уровня"
                            }
                          }
                        ]
                      },
                      {
                        "ColumnSpan": 3,
                        "Items": [
                          {
                            "ComboBox": {
                              "ValueProperty": "Id",
                              "DisplayProperty": "Name",
                              "Value": {
                                "PropertyBinding": {
                                  "DataSource": "MainDataSource",
                                  "Property": "SecondLevelMenu"
                                }
                              },
                              "Items": {
                                "PropertyBinding": {
                                  "DataSource": "MenuDataSource.SecondLevelItems"
                                }
                              }
                            }
                          }
                        ]
                      },
                      {
                        "ColumnSpan": 3,
                        "Items": [
                          {
                            "Label": {
                              "Text": "Элемент меню третьего уровня"
                            }
                          }
                        ]
                      },
                      {
                        "ColumnSpan": 3,
                        "Items": [
                          {
                            "ComboBox": {
                              "ValueProperty": "Id",
                              "DisplayProperty": "Name",
                              "Value": {
                                "PropertyBinding": {
                                  "DataSource": "MainDataSource",
                                  "Property": "ThirdLevelMenu"
                                }
                              },
                              "Items": {
                                "PropertyBinding": {
                                  "DataSource": "MenuDataSource.ThirdLevelItems"
                                }
                              }
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            }
          }
        },
        {
          "ToolBar": {
            "Items": [
              {
                "ToolBarButton": {
                  "Text": "ОК",
                  "OnClick": {
                    "Name": "CreateItem"
                  },
                  "Action": {
                    "SaveAction": {
                      "DataSource": "MainDataSource"
                    }
                  }
                }
              },
              {
                "ToolBarButton": {
                  "Text": "Отмена",
                  "Action": {
                    "CancelAction": {}
                  }
                }
              }
            ]
          }
        }
      ]
    }
  },
  "DataSources": [
    {
      "DocumentDataSource": {
        "Name": "MainDataSource",
        "ConfigId": "Administration",
        "DocumentId": "MenuItemSettings"
      }
    },
    {
      "DocumentDataSource": {
        "Name": "MenuDataSource",
        "ConfigId": "Administration",
        "DocumentId": "MenuItemSettings",
        "UpdateAction": "LoadMenuItems"
      }
    }
  ],
  "OnLoaded": {
    "Name": "ViewLoaded"
  },
  "ChildViews": [],
  "Text": "Настройка главного меню",
  "MetadataType": "EditView",
  "Description": "",
  "Caption": "Форма редактирования настроек пунктов меню",
  "Name": "EditView",
  "ParentId": "47db35a8-9185-4fc9-ab5e-cd42360b5d4d",
  "Version": "version_systemconfig",
  "__ConfigId": "systemconfig",
  "__DocumentId": "viewmetadata"
}
